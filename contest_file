Conftest.py - конфигурация тестов


Для хранения часто употребимых фикстур и хранения глобальных настроек нужно использовать файл conftest.py,
который должен лежать в директории верхнего уровня в вашем проекте с тестами. Можно создавать дополнительные
файлы conftest.py в других директориях, но тогда настройки в этих файлах будут применяться только к тестам
в под-директориях.


Есть одна важная особенность поведения конфигурационных файлов, о которой вы обязательно должны знать.
PyTest автоматически находит и подгружает файлы conftest.py, которые находятся в директории с тестами.
Если вы храните все свои скрипты для курса в одной директории, будьте аккуратны и следите, чтобы не
возникало ситуации, когда вы запускаете тесты из папки tests:

tests/
├── conftest.py
├── subfolder
│   └── conftest.py
│   └── test_abs.py

следует избегать!

В таком случае применятся ОБА файла conftest.py, что может вести к непредсказуемым ошибкам и конфликтам.






